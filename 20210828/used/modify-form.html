<!DOCTYPE html>
<html>
<title>자유게시판 글작성</title>
<body>

<h1>게시글작성</h1>
<table>
  <tr>
    <th>제목</th>
    <td><input type="text" id="title" name="title"/></td>
  </tr>
  <tr>
    <th>작성자</th>
    <td><input type="text" id="writer" name="writer"/></td>
  </tr>
  <tr>
    <th>내용</th>
    <td>
      <textarea type="text" id="contents" name="contents"></textarea>
    </td>
  </tr>
</table>
<div style="width:100%; text-align: right;">
  <button onclick="window.history.back()">취소</button>
  <button onclick="save()">수정</button>
</div>

</body>

<script>
    
    var list_num = localStorage.getItem('modify-num'); 
    /* Number(list_num); */
    
    var set_contents = JSON.parse(localStorage.getItem("contents"));
    
    var set_contents = set_contents[list_num];
    document.getElementById('title').value = set_contents.title;
    document.getElementById('writer').value = set_contents.writer;
    document.getElementById('contents').value = set_contents.contents;   
    
    
  function save() {
    if (!confirm('수정하시겠습니까?')) {
      return;
    }
    var contents;
      try {
        contents = JSON.parse(localStorage.getItem("contents"));
      } catch (e) {
        contents = null;
      }

    if (!contents) {
      contents = [];
    }

    var title = document.getElementById('title').value;
    var writer = document.getElementById('writer').value;
    var content = document.getElementById('contents').value;
      
    var modify_content = contents[list_num];
    modify_content.title = title
    modify_content.writer = writer
    modify_content.contents = content
    modify_content.write_date = new Date();

      
      localStorage.setItem("contents", JSON.stringify(contents)); 
      

    alert('수정되었습니다.');
    location.href = 'list.html';
  }
</script>
</html>